<% layout("/layouts/boilerplate") %>

<div class="container-fluid p-4">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 mb-3">
      <div class="card shadow-sm rounded-4">
        <div class="card-body">
          <div class="text-center mb-3">
            <img src="<%= currentUser.profileImage ? currentUser.profileImage.url : '/images/default-profile.jpg' %>" class="rounded-circle" width="80" height="80" alt="Profile">
            <h5 class="mt-2"><%= currentUser.username %></h5>
            <small class="text-muted"><%= currentUser.email %></small>
          </div>
          <ul class="list-group list-group-flush">
            <a href="/dashboard" class="list-group-item list-group-item-action">🏠 Overview</a>
            <a href="/profile/settings" class="list-group-item list-group-item-action">👤 My Profile</a>
            <a href="/saved-items" class="list-group-item list-group-item-action">🔖 Saved Items</a>
            <a href="/notifications" class="list-group-item list-group-item-action">🔔 Notifications</a>
            <a href="/change-password" class="list-group-item list-group-item-action">🔒 Change Password</a>
            <a href="/logout" class="list-group-item list-group-item-action text-danger">🚪 Logout</a>
          </ul>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="col-md-9">
      <div class="card shadow-sm rounded-4 mb-3 p-4">
        <h4 class="mb-3">📊 Welcome to Your Dashboard</h4>
        <div class="row text-center">
          <div class="col-md-4">
            <div class="p-3 rounded-3 shadow-sm bg-light">
              <h5>Saved Listings</h5>
              <h2><%= currentUser.savedListings ? currentUser.savedListings.length : 0 %></h2>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 rounded-3 shadow-sm bg-light">
              <h5>Notifications</h5>
              <h2>3</h2>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 rounded-3 shadow-sm bg-light">
              <h5>Recent Activity</h5>
              <h2>5</h2>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow-sm rounded-4 p-4">
        <h5>📅 Recent Activities</h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">You saved a listing - <small class="text-muted">2 days ago</small></li>
          <li class="list-group-item">You updated your profile - <small class="text-muted">4 days ago</small></li>
          <li class="list-group-item">You changed your password - <small class="text-muted">1 week ago</small></li>
        </ul>
      </div>
    </div>
  </div>
</div>
